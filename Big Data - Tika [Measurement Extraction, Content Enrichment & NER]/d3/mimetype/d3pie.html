<html>
<head></head>
<body>

<div id="pieChart"></div>

<script src="d3.min.js"></script>
<script src="d3pie.min.js"></script>
<script>
var pie = new d3pie("pieChart", {
	"header": {
		"title": {
			"text": " MIME Diversity",
			"fontSize": 24,
			"font": "open sans"
		}
	},
	"footer": {
		"color": "#999999",
		"fontSize": 10,
		"font": "open sans",
		"location": "bottom-left"
	},
	"size": {
		"canvasWidth": 2000,
		"canvasHeight": 2000,
		"pieOuterRadius": "50%"
	},
	"data": {
		"sortOrder": "value-desc",
		"content": [
		  {
			"label":"application/pdf",
			"value":29840
		  },
		  {
			"label":"text/html; format=concept",
			"value":34500
		  },
		   {
			"label":"application/javascript",
			"value":25000
		  },
		  {
			"label":"application/php; format=concept",
			"value":10000
		  },
		   {
			"label":"application/java",
			"value":3000
		  },
		  {
			"label":"application/xml; format=concept",
			"value":1000
		  }
		  
		]
	},
	"labels": {
		"outer": {
			"format" : "label",
			"pieDistance": 500,
			"hideWhenLessThanPercentage": 3
		},
		"inner": {
			"hideWhenLessThanPercentage": 3
		},
		"mainLabel": {
			"fontSize": 11
		},
		"percentage": {
			"color": "#ffffff",
			"decimalPlaces": 2
		},
		"value": {
			"color": "#adadad",
			"fontSize": 11
		},
		"lines": {
			"enabled": true,
			"style": "curved"
		},
		"truncation": {
			"enabled": true
		}
	},
	"effects": {
		"pullOutSegmentOnClick": {
			"effect": "linear"
		}
	},
	"misc": {
		"gradient": {
			"enabled": true,
			"percentage": 100
		},
		"canvasPadding": {
			"top": 5,
			"right": 5,
			"bottom": 5,
			"left": 5
		}
	},
	"callbacks": {
		"onClickSegment": function(context){
			//console.log(context.index);
			var pc = document.getElementById("p0_segmentPercentage"+context.index+"-inner").textContent;
			pc = Math.round(pc.substring(0,pc.length-1));
			if(!context.expanded){
				var lg = document.getElementsByClassName("p0_lineGroups")[0].childNodes[context.index].childNodes[0];
				lg.style["opacity"] = 1;
				var lb = document.getElementsByClassName("p0_labels-outer")[0].childNodes[context.index];
				lb.style["opacity"] = 1;
			}
			else{
				if(pc < 4){
					var lg = document.getElementsByClassName("p0_lineGroups")[0].childNodes[context.index].childNodes[0];
					lg.style["opacity"] = 0;
					var lb = document.getElementsByClassName("p0_labels-outer")[0].childNodes[context.index];
					lb.style["opacity"] = 0;
				}
			}
		}
	}
});
</script>
<script>setTimeout(function() {window.scrollTo(window.innerHeight/2,window.innerWidth/2); }, 1);</script>
</body>
</html>